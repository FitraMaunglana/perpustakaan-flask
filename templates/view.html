{% extends "base.html" %}
{% block content %}
<article class="file-view">
  <h2>{{ file.title }}</h2>
  <p class="meta">Diunggah: {{ file.created_at }}</p>
  <p>{{ file.description }}</p>

  <div class="pdf-container">
    <embed src="/uploads/{{ file.filename }}" type="application/pdf" width="100%" height="600px" />
  </div>

  <p class="actions"><a class="btn ghost" href="/download/{{ file.id }}">Download</a></p>

  <section class="comments">
    <h3>Komentar</h3>
    <form method="post" action="/file/{{ file.id }}/comment" class="form">
      <label>Nama
        <input name="author" placeholder="Nama Anda (opsional)" />
      </label>
      <label>Komentar
        <textarea name="content" required></textarea>
      </label>
      <p><button class="btn" type="submit">Kirim Komentar</button></p>
    </form>

    <div class="comment-list">
      {% for c in comments %}
        <div class="comment">
          <div class="who">{{ c.author or 'Anonim' }} <span class="when">{{ c.created_at }}</span></div>
          <div class="what">{{ c.content }}</div>
        </div>
      {% else %}
        <p>Belum ada komentar.</p>
      {% endfor %}
    </div>
  </section>
</article>
{% endblock %}
